var wBooksApp=angular.module("wBooksApp",["ngResource","ngRoute"]);wBooksApp.controller("resultsCtrl",["$scope","$http","FavoriteService",function(t,e,o){t.searched=!1,t.getSearch=function(){var e=t.searchTerm.replace(/ /g,"+"),o=0;a(e,o),t.getPage=function(){totalItems-=10,totalItems>0&&(o+=10,a(e,o))}};var a=function(o,a){url="https://www.googleapis.com/books/v1/volumes?q="+o+"&startIndex="+a+"&key=AIzaSyDE0-szZIrViSPNB284ckdUhvp3pyFLPsY",e.get(url).then(function(e){t.searched=!0,t.actualSearchTerm=t.searchTerm,0==a?(totalItems=e.data.totalItems,t.bookResults=e.data.items):t.bookResults=t.bookResults.concat(e.data.items),s(t.bookResults)})};t.bookInfo=function(o){e.get("https://www.googleapis.com/books/v1/volumes/"+o+"?key=AIzaSyDE0-szZIrViSPNB284ckdUhvp3pyFLPsY").then(function(e){t.bookData=e.data})};var s=function(t){for(var e=0;e<t.length;e++)t[e].isLocalStorageEnable=o.isLocalStorageEnable,t[e].isFavorite=o.isFavorite(t[e]),itemTesting="alok2",t[e].markAs=function(t){switch(thisItem=this,t){case!0:o.setFav(thisItem);break;case!1:o.deleteFav(thisItem)}thisItem.isFavorite=t}}}]),wBooksApp.service("FavoriteService",[function(){this.isLocalStorageEnable=function(){return"undefined"!=typeof Storage},this.isFavorite=function(t){return"1"===localStorage.getItem(t.id)},this.setFav=function(t){localStorage.setItem(t.id,"1")},this.deleteFav=function(t){localStorage.removeItem(t.id)}}]),wBooksApp.filter("yearFilter",function(){return function(t){if(null!==t){return new Date(t).getFullYear()}}}),wBooksApp.filter("htmlFilter",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]);